<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml2/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title> mepbm</title>
        <script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1','packages':['annotationchart']}]}"></script>
        <script type="text/javascript">
                    (function(i, s, o, g, r, a, m){i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function(){
                    (i[r].q = i[r].q || []).push(arguments)}, i[r].l = 1 * new Date(); a = s.createElement(o),
                            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
                    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
                    ga('create', 'UA-62744218-1', 'auto');
                    ga('send', 'pageview');
        </script>
        <script type="text/javascript">
                    var require = function (src) {
                    var s = document.createElement('script');
                            s.type = 'text/javascript';
                            s.src = src;
                            s.async = true;
                            document.head.appendChild(s);
                            document.head.removeChild(s);
                            s = null, delete s;
                            console.log("Loading script at: ", src);
                    };
                    jsonp = function (event) {
                    jsonp.history.unshift(event);
                            console.table(jsonp.history[0]);
                            if (jsonp.history.length > 13){
                    complete();
                    }
                    }
            jsonp.history = [];
                    var trial143 = function(nx){
                    require("http://localhost:13370/game143/Turn00/g143" + nx + "t000.js");
                            require("http://localhost:13370/game143/Turn01/g143" + nx + "t001.js");
                            require("http://localhost:13370/game143/Turn02/g143" + nx + "t002.js");
                            require("http://localhost:13370/game143/Turn03/g143" + nx + "t003.js");
                            require("http://localhost:13370/game143/Turn04/g143" + nx + "t004.js");
                            require("http://localhost:13370/game143/Turn05/g143" + nx + "t005.js");
                            require("http://localhost:13370/game143/Turn06/g143" + nx + "t006.js");
                            require("http://localhost:13370/game143/Turn07/g143" + nx + "t007.js");
                            require("http://localhost:13370/game143/Turn08/g143" + nx + "t008.js");
                            require("http://localhost:13370/game143/Turn09/g143" + nx + "t009.js");
                            require("http://localhost:13370/game143/Turn10/g143" + nx + "t010.js");
                            require("http://localhost:13370/game143/Turn11/g143" + nx + "t011.js");
                            require("http://localhost:13370/game143/Turn12/g143" + nx + "t012.js");
                            require("http://localhost:13370/game143/Turn13/g143" + nx + "t013.js");
                    }
//            trial143("n03");
//            trial143("n04");
//            trial143("n05");
//            trial143("n06");
//            trial143("n07");
//            trial143("n08");
//            trial143("n09");
//            trial143("n10");
            trial143("n11");
                    var complete = function(){

                    google.load('visualization', '1', {'packages': ['annotationchart']});
                            google.setOnLoadCallback(drawChart);
                            function drawChart() {

                            var data = new google.visualization.DataTable();
                                    data.addColumn('date', 'Date');
                                    data.addColumn('number', 'Mage');
                                    data.addColumn('string', 'Mage title');
                                    data.addColumn('string', 'Mage text');
                                    data.addColumn('number', 'Agent');
                                    data.addColumn('string', 'Agent title');
                                    data.addColumn('string', 'Agent text');
                                    data.addColumn('number', 'Command');
                                    data.addColumn('string', 'Command title');
                                    data.addColumn('string', 'Command text');
                                    data.addColumn('number', 'Emissary');
                                    data.addColumn('string', 'Emissary title');
                                    data.addColumn('string', 'Emissary text');
                                    var wall = [].concat(jsonp.history)
                                    while (wall.length){
                            var current = wall.shift();
                                    var dwall = [].concat(current);
                                    var cskill = 0, eskill = 0, askill = 0, mskill = 0;
                                    while (dwall.length){
                            toon = dwall.shift();
                                    cskill += toon.command;
                                    askill += toon.agent;
                                    eskill += toon.emissary;
                                    mskill += toon.mage;
                            }
                            data.addRows([
                                    [new Date(2314, 2, wall.length + 1), mskill, undefined, undefined, askill, undefined, undefined, cskill, undefined, undefined, eskill, undefined, undefined],
                            ]);
                            }
                            var chart = new google.visualization.AnnotationChart(document.getElementById('chart_div'));
                                    var options = {
                                    displayAnnotations: true
                                    };
                                    chart.draw(data, options);
                            }
                    }
        </script>

    </head>

    <body>
        <div id='chart_div' style='width: 900px; height: 500px;'></div>
    </body>
</html>